(this["webpackJsonpassignment-commutatus"]=this["webpackJsonpassignment-commutatus"]||[]).push([[0],{148:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(54),s=a.n(c),l=(a(148),a(149),a(14)),i=a(12),d=a(171),o=a(179),m=a(181),j=a(178),b=a(11),u=a(119),h=function(e){if(e){var t=localStorage.getItem(e.toLowerCase());try{t?t=JSON.parse(t):O(e,t=[])}catch(a){console.log(a)}finally{return t}}},O=function(e,t){e&&localStorage.setItem(e.toLowerCase(),JSON.stringify(t))},p=function(e){return h("departments").some((function(t){return t.name===e.toLowerCase()}))},x=function(e){var t=e.email;return h("employees").filter((function(e){return t&&t.toLowerCase()===e.email.toLowerCase()})).length},f=function(e,t){return e.find((function(e){return e.id===+t}))},v=function(e,t,a){return e.filter((function(e){return!e.departmentId&&!e.teamId||e.teamId===+t&&e.departmentId===+a})).map((function(e){var t=e.id;return{key:t,text:e.name,value:t}}))},y=a(2),C=Object(n.createContext)(),g=function(e){var t=e.children,a=Object(n.useState)([]),r=Object(b.a)(a,2),c=r[0],s=r[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),d=i[0],o=i[1];return Object(n.useEffect)((function(){s(h("departments")),o(h("employees"))}),[]),Object(y.jsx)(C.Provider,{value:{departments:c,setDepartments:s,employees:d,setEmployees:o},children:t})},I=a(37),w=a(175),E=a(170),D=function(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),s=Object(b.a)(c,2),i=s[0],d=s[1];Object(n.useEffect)((function(){var e=h("employees");r(e),d(e),console.log(e)}),[]);return Object(y.jsx)("div",{children:Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(j.a.Column,{floated:"left",width:13,children:[Object(y.jsx)(o.a,{as:"h3",children:"Employee Details"}),Object(y.jsx)("p",{children:"Emplyee details and some more actions"})]}),Object(y.jsx)(j.a.Column,{floated:"right",width:3,children:Object(y.jsxs)(l.b,{to:"/updateEmployee",className:"ui primary right floated button mini",children:[Object(y.jsx)(I.a,{name:"plus"})," New"]})}),Object(y.jsx)(j.a.Column,{width:16,children:Object(y.jsxs)(w.a,{color:"blue",children:[Object(y.jsxs)(w.a.Header,{children:[Object(y.jsxs)(w.a.Row,{children:[Object(y.jsx)(w.a.HeaderCell,{colSpan:5,children:Object(y.jsx)("p",{children:"Please enter any employee details to search."})}),Object(y.jsx)(w.a.HeaderCell,{children:Object(y.jsx)(E.a,{icon:"search",placeholder:"Search...",className:"mini",onChange:function(e,t){var n=t.value;if(n){var r=a.filter((function(e){return Object.values(e).join(" ").toLowerCase().includes(n.toLowerCase())}));d(r)}else d(a)}})})]}),Object(y.jsxs)(w.a.Row,{children:[Object(y.jsx)(w.a.HeaderCell,{children:"ID"}),Object(y.jsx)(w.a.HeaderCell,{children:"Name"}),Object(y.jsx)(w.a.HeaderCell,{children:"Email"}),Object(y.jsx)(w.a.HeaderCell,{children:"Phone Number"}),Object(y.jsx)(w.a.HeaderCell,{children:"Position"}),Object(y.jsx)(w.a.HeaderCell,{children:"Action"})]})]}),Object(y.jsx)(w.a.Body,{children:i&&i.map((function(e){var t=e.id,a=e.name,n=e.email,r=e.phoneNumber,c=e.position;return Object(y.jsxs)(w.a.Row,{children:[Object(y.jsx)(w.a.Cell,{children:t}),Object(y.jsx)(w.a.Cell,{children:a}),Object(y.jsx)(w.a.Cell,{children:n}),Object(y.jsx)(w.a.Cell,{children:r}),Object(y.jsx)(w.a.Cell,{children:c}),Object(y.jsx)(w.a.Cell,{children:Object(y.jsxs)(l.b,{to:"/updateEmployee/".concat(t),className:"ui primary center floated button mini",children:[Object(y.jsx)(I.a,{name:"edit"})," Edit"]})})]},t)}))})]},"employeesTable")})]})})},N=a(131),S=a(174),L=function(){var e=Object(i.f)(),t=Object(n.useContext)(C),a=t.employees,r=t.setEmployees,c=Object(n.useState)({}),s=Object(b.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)(!1),p=Object(b.a)(u,2),v=p[0],g=p[1],I=Object(i.g)().id;Object(n.useEffect)((function(){var e=f(a,+I);e&&e.email&&(m(Object(N.a)({},e)),g(!0))}),[I,a]);var w=function(e){var t=l;t[e.target.name]=e.target.value,m(t),console.log(I)};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.a,{children:[Object(y.jsxs)(o.a,{as:"h3",children:[I?"Update":"Add"," Employee Details "]}),Object(y.jsx)(j.a,{children:Object(y.jsx)(j.a.Column,{width:8,children:Object(y.jsxs)(S.a,{children:[Object(y.jsx)(S.a.Field,{id:"full-name",control:E.a,label:"Name",name:"name",defaultValue:v&&l&&l.name||"",placeholder:"joe schmoe",onChange:w}),Object(y.jsx)(S.a.Field,{id:"phone-number",control:E.a,label:"Phone Number",name:"phoneNumber",defaultValue:v&&l&&l.phoneNumber||"",onChange:w}),Object(y.jsx)(S.a.Field,{id:"email",control:E.a,label:"Email",name:"email",defaultValue:v&&l&&l.email||"",placeholder:"joe@schmoe.com",onChange:w}),Object(y.jsx)("button",{className:"ui primary button",onClick:function(){var t=l,a={};a=v?function(e){var t=h("employees");if(t.length)return t.forEach((function(t){e.id===t.id&&(t.name=e.name,t.email=e.email,t.phoneNumber=e.phoneNumber)})),O("employees",t),{collection:t}}(t):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"employees",t=arguments.length>1?arguments[1]:void 0;if(x(t))return{error:"Employee already exist."};var a=h(e);return a.length?t.id=a[a.length-1].id+1:t.id=1,a.push(t),O("employees",a),{collection:a}}("employees",t),a.error||r(a.collection),e.push("/employee")},children:"Save"})]})})})]})})},M=function(){var e=Object(n.useContext)(C),t=e.departments,a=e.employees;return Object(y.jsx)("div",{children:Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(j.a.Column,{floated:"left",width:13,children:[Object(y.jsx)(o.a,{as:"h3",children:"Departments Details"}),Object(y.jsx)("p",{children:"Departments details and some more actions"})]}),Object(y.jsx)(j.a.Column,{floated:"right",width:3,children:Object(y.jsxs)(l.b,{to:"/AddDepartment",className:"ui primary right floated button mini",children:[Object(y.jsx)(I.a,{name:"plus"})," New"]})}),Object(y.jsx)(j.a.Column,{width:16,children:Object(y.jsxs)(w.a,{color:"blue",children:[Object(y.jsx)(w.a.Header,{children:Object(y.jsx)(w.a.Row,{children:["ID","Department Name","Head","Action"].map((function(e){return Object(y.jsx)(w.a.HeaderCell,{children:e},e)}))})}),Object(y.jsx)(w.a.Body,{children:t&&t.map((function(e){var t=e.name,n=e.id,r=(e.teams,e.head);return Object(y.jsxs)(w.a.Row,{children:[Object(y.jsx)(w.a.Cell,{children:n}),Object(y.jsx)(w.a.Cell,{children:t}),Object(y.jsx)(w.a.Cell,{children:f(a,r).name}),Object(y.jsx)(w.a.Cell,{children:Object(y.jsxs)(l.b,{to:"/departmentDetails/".concat(n),className:"ui primary button mini",children:[Object(y.jsx)(I.a,{name:"eye"})," View"]})})]},n)}))})]},"departmentsTable")})]})})},T=a(172),H=a(177),F=function(){var e=Object(i.f)(),t=Object(n.useContext)(C),a=t.employees,r=t.setDepartments,c=t.setEmployees,s=Object(n.useState)({}),l=Object(b.a)(s,2),m=l[0],u=l[1],x=Object(n.useState)([]),f=Object(b.a)(x,2),g=f[0],I=f[1],w=Object(n.useState)(null),D=Object(b.a)(w,2),N=D[0],L=D[1];Object(n.useEffect)((function(){var e=v(a);I(e)}),[a]);var M=function(e,t){var a=t.name,n=t.value,r=m;m[a]=n,u(r)};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.a,{children:[Object(y.jsx)(o.a,{as:"h3",children:"Add Department Details"}),Object(y.jsx)(j.a,{children:Object(y.jsx)(j.a.Column,{width:8,children:Object(y.jsxs)(S.a,{children:[Object(y.jsx)(S.a.Field,{id:"full-name",control:E.a,label:"Department Name",name:"departmentName",onChange:M}),Object(y.jsx)(S.a.Field,{control:T.a,label:"Department Head",placeholder:"Department Head",name:"departmentHead",options:g,search:!0,selection:!0,onChange:M}),N&&Object(y.jsx)(H.a,{info:!0,header:"Department already exists.",content:""}),Object(y.jsx)("button",{className:"ui primary button",onClick:function(t){if(m){var a=function(e){var t=e.departmentName,a=e.departmentHead;if(p(t))return{error:"Department already exist."};var n={name:t.toLowerCase(),head:a,teams:[]},r=h("departments"),c=h("employees");r.length?n.id=r[r.length-1].id+1:n.id=1,r.push(n);var s=c.find((function(e){return e.id===a}));return s.departmentId=n.id,s.position="head",O("employees",c),O("departments",r),{employees:c,departments:r}}(m);a.error?L(!0):(c(a.employees),r(a.departments),e.push("/departments"))}},children:"Save"})]})})})]})})},A=a(176),R=function(){var e=Object(n.useContext)(C),t=e.departments,a=e.employees,r=Object(i.g)().id,c=Object(n.useState)(),s=Object(b.a)(c,2),d=s[0],m=s[1];return Object(n.useEffect)((function(){m(f(t,+r))}),[t,r]),Object(y.jsx)(y.Fragment,{children:d&&Object(y.jsx)("div",{children:Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(j.a.Column,{floated:"left",width:13,children:[Object(y.jsx)(o.a,{as:"h3",children:d&&d.name}),Object(y.jsx)("p",{children:"Below are the team details of selected present under this department"})]}),Object(y.jsx)(j.a.Column,{floated:"right",width:3,children:Object(y.jsxs)(l.b,{to:"/addTeam/".concat(r),className:"ui primary right floated button mini",children:[Object(y.jsx)(I.a,{name:"plus"})," New"]})}),Object(y.jsx)(j.a.Column,{width:16,children:Object(y.jsxs)(w.a,{color:"blue",children:[Object(y.jsx)(w.a.Header,{children:Object(y.jsx)(w.a.Row,{children:["ID","Team Name","Team Leader","Team Members","Action"].map((function(e){return Object(y.jsx)(w.a.HeaderCell,{children:e},e)}))})}),Object(y.jsx)(w.a.Body,{children:d&&d.teams.map((function(e){var t=e.name,n=e.id,c=e.teamLeader,s=e.teamMembers;return Object(y.jsxs)(w.a.Row,{children:[Object(y.jsx)(w.a.Cell,{children:n}),Object(y.jsx)(w.a.Cell,{children:t}),Object(y.jsx)(w.a.Cell,{children:f(a,c).name}),Object(y.jsx)(w.a.Cell,{children:Object(y.jsx)(A.a,{items:s.map((function(e){return f(a,e).name}))},n)}),Object(y.jsxs)(w.a.Cell,{children:[Object(y.jsx)(l.b,{to:"/updateTeam/".concat(r,"/").concat(n),className:"ui primary button mini",children:"Edit"}),Object(y.jsx)(l.b,{to:"/updateMembers/add/".concat(r,"/").concat(n),className:"ui orange button mini",children:"Add member"}),Object(y.jsx)(l.b,{to:"/updateMembers/remove/".concat(r,"/").concat(n),className:"ui red button mini",color:"red",children:"Remove member"})]})]},n)}))})]},"departmentsTable")})]})})})},k=function(){var e=Object(i.f)(),t=Object(i.g)(),a=t.departmentId,r=t.teamId,c=Object(n.useContext)(C),s=c.departments,l=c.setDepartments,m=c.employees,u=c.setEmployees,p=Object(n.useState)({departmentId:+a}),x=Object(b.a)(p,2),g=x[0],I=x[1],w=Object(n.useState)({}),D=Object(b.a)(w,2),N=D[0],L=D[1],M=Object(n.useState)([]),H=Object(b.a)(M,2),F=H[0],R=H[1],k=Object(n.useState)([]),B=Object(b.a)(k,2),P=B[0],V=B[1],J=Object(n.useState)(!1),U=Object(b.a)(J,2),Y=U[0],q=U[1];Object(n.useEffect)((function(){var e=v(m,r,a);R(e),V(e)}),[m,a,r,s]),Object(n.useEffect)((function(){var e=function(e,t,a){var n=f(a,+e);if(n){return f(n.teams,+t)||{}}return{}}(a,r,s);if(e.id){L(e),q(!0);var t=g;t.id=e.id,t.name=e.name}}),[m,a,r,s,g]);var z=function(e,t){var n=t.name,c=t.value,s=g;if(s[n]=c,I(s),console.log(g),"teamLeader"===n){var l=v(m,r,a).filter((function(e){return e.value!==c}));R(l)}};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.a,{children:[Object(y.jsxs)(o.a,{as:"h3",children:[r&&a?"Update":"Add"," Team Details"]}),Object(y.jsx)(j.a,{children:Object(y.jsx)(j.a.Column,{width:8,children:Object(y.jsxs)(S.a,{children:[Object(y.jsx)(S.a.Field,{id:"full-name",control:E.a,label:"Team Name",name:"name",defaultValue:Y&&N.name||"",onChange:z}),Y&&N&&N.teamLeader&&Object(y.jsxs)("p",{children:["Old team leader : ",f(m,N.teamLeader).name]}),Object(y.jsx)(S.a.Field,{control:T.a,label:"Team Leader",name:"teamLeader",options:P,placeholder:"Team Leader",search:!0,onChange:z}),Y&&N&&N.teamMembers.length&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("p",{children:"Old team members"}),Object(y.jsx)(A.a.Item,{as:"ol",children:N.teamMembers.map((function(e){return Object(y.jsx)(A.a.Item,{as:"li",value:"-",children:f(m,e).name},e)}))},N.id)]}),Object(y.jsx)(S.a.Dropdown,{control:T.a,label:"Team Members",placeholder:"Team Memebers",name:"teamMembers",options:F,search:!0,multiple:!0,selection:!0,onChange:z}),Object(y.jsx)("button",{className:"ui primary button",onClick:function(t){var n;n=Y?function(e){var t=h("departments"),a=h("employees"),n=t.find((function(t){return t.id===e.departmentId})).teams.find((function(t){return t.id===e.id})),r=a.find((function(e){return e.id===n.teamLeader}));return r.position=null,r.teamId=null,r.departmentId=null,a.filter((function(e){return n.teamMembers.includes(e.id)})).forEach((function(e){r.position=null,r.teamId=null,r.departmentId=null})),a.filter((function(t){var a=t.id;return e.teamMembers.includes(a)||a===e.teamLeader})).forEach((function(t){e.teamLeader===t.id?t.position="team leader":t.position="team member",t.departmentId=e.departmentId,t.teamId=e.id})),n.name=e.name,n.teamLeader=e.teamLeader,n.teamMembers=e.teamMembers,O("employees",a),O("departments",t),{updatedEmployees:a,updatedDepartments:t}}(g):function(e){var t,a=h("departments"),n=a.find((function(t){return t.id===e.departmentId})),r=h("employees");if(t=e.name,!n.teams.some((function(e){return e.name===t.toLowerCase()}))){var c=n.teams;c.length?e.id=c[c.length-1].id+1:e.id=1,n.teams.push(e),r.filter((function(t){var a=t.id;return e.teamMembers.includes(a)||a===e.teamLeader})).forEach((function(t){e.teamLeader===t.id?t.position="team leader":t.position="team member",t.departmentId=e.departmentId,t.teamId=e.id}))}return O("employees",r),O("departments",a),{updatedEmployees:r,updatedDepartments:a}}(g),u(n.updatedEmployees),l(n.updatedDepartments),e.push("/departmentDetails/".concat(a))},children:"Save"})]})})})]})})},B=function(){var e=Object(i.f)(),t=Object(i.g)(),a=t.action,r=t.departmentId,c=t.teamId,s=Object(n.useContext)(C),l=s.employees,m=s.setDepartments,p=s.setEmployees,x=Object(n.useState)([]),g=Object(b.a)(x,2),I=g[0],w=g[1],E=Object(n.useState)([]),D=Object(b.a)(E,2),N=D[0],L=D[1],M=Object(n.useState)(null),F=Object(b.a)(M,2),A=F[0],R=F[1];Object(n.useEffect)((function(){if("add"===a){var e=v(l);w(e)}else if("remove"===a){var t=function(e,t){if(!e&&!t)return[];var a=h("departments"),n=h("employees"),r=f(a,e);if(r){var c=f(r.teams,t);if(c)return n.filter((function(e){return c.teamMembers.includes(e.id)})).map((function(e){var t=e.id;return{key:t,text:e.name,value:t}}))}return{error:"Department & Team info not found."}}(r,c);t.error?R(t.error):w(t)}}),[l,r,c,a]);return Object(y.jsx)(d.a,{children:A?Object(y.jsx)(H.a,{info:!0,header:A,content:""}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(o.a,{as:"h3",children:["add"===a?"Add new":"Remove"," team members"]}),Object(y.jsxs)("p",{children:["You can ","add"===a?"add":"remove"," multiple team members in the existing team."]}),Object(y.jsxs)("p",{children:["Below field is showing all the employees which are","add"===a?" not assigned into any teams.":" present in the team."]}),Object(y.jsx)(j.a,{children:Object(y.jsx)(j.a.Column,{width:8,children:Object(y.jsxs)(S.a,{children:[Object(y.jsx)(S.a.Select,{control:T.a,label:"Team Members",placeholder:"Team Memebers",name:"teamMembers",options:I,search:!0,multiple:!0,onChange:function(e,t){t.name;var a=t.value;L(a),console.log(N)}}),Object(y.jsx)("button",{className:"ui primary button",onClick:function(t){var n=function(e,t,a,n){var r=h("departments"),c=h("employees"),s=r.find((function(e){return e.id===+t})).teams.find((function(e){return e.id===+a})),l=c.filter((function(t){return e.includes(t.id)}));return"add"===n?(l.forEach((function(e){e.departmentId=+t,e.teamId=+a,e.position="team member"})),s.teamMembers=[].concat(Object(u.a)(s.teamMembers),Object(u.a)(e))):"remove"===n&&(l.forEach((function(e){e.departmentId=null,e.teamId=null,e.position=null})),s.teamMembers=s.teamMembers.filter((function(t){return!e.includes(t)}))),O("employees",c),O("departments",r),{updatedEmployees:c,updatedDepartments:r}}(N,r,c,a),s=n.updatedEmployees,l=n.updatedDepartments;m(l),p(s),e.push("/departmentDetails/".concat(r))},children:"Save"})]})})})]})})},P=a(173),V=function(e){var t=e.id,a=e.icon,n=e.route,r=e.label;return Object(y.jsxs)(A.a.Item,{children:[Object(y.jsx)(A.a.Icon,{name:a}),Object(y.jsx)(A.a.Content,{children:Object(y.jsx)(l.b,{to:n,children:Object(y.jsx)(A.a.Header,{children:r})})})]},t)},J=function(){var e=Object(n.useContext)(C).departments;return Object(y.jsxs)(A.a,{children:[Object(y.jsx)(V,{icon:"users",label:"Employee Details",route:"/employee",id:"usersList"}),Object(y.jsx)(P.a,{}),Object(y.jsxs)(A.a.Item,{children:[Object(y.jsx)(A.a.Icon,{name:"user"}),Object(y.jsxs)(A.a.Content,{children:[Object(y.jsx)(l.b,{to:"/departments",children:Object(y.jsx)(A.a.Header,{children:"CEO"})}),Object(y.jsx)(A.a.List,{children:e&&e.map((function(e){return Object(y.jsx)(V,{id:e.id,label:e.name,icon:"building",route:"/departmentDetails/".concat(e.id)})}))},"departments")]})]},"deps&teams")]})};var U=function(){return Object(y.jsx)(g,{children:Object(y.jsxs)(d.a,{style:{padding:"1rem"},children:[Object(y.jsx)(o.a,{as:"h2",attached:"top",children:"React Assignment"}),Object(y.jsx)(m.a,{attached:!0,children:Object(y.jsx)(l.a,{children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)(j.a.Column,{mobile:16,tablet:4,computer:4,children:Object(y.jsx)(J,{})}),Object(y.jsx)(j.a.Column,{mobile:16,tablet:12,computer:12,children:Object(y.jsxs)(i.c,{children:[Object(y.jsx)(i.a,{path:"/employee",children:Object(y.jsx)(D,{})}),Object(y.jsx)(i.a,{path:"/updateEmployee/:id",children:Object(y.jsx)(L,{})}),Object(y.jsx)(i.a,{path:"/updateEmployee",children:Object(y.jsx)(L,{})}),Object(y.jsx)(i.a,{path:"/departmentDetails/:id",children:Object(y.jsx)(R,{})}),Object(y.jsx)(i.a,{path:"/addDepartment",children:Object(y.jsx)(F,{})}),Object(y.jsx)(i.a,{path:"/departments",children:Object(y.jsx)(M,{})}),Object(y.jsx)(i.a,{path:"/addTeam/:departmentId",children:Object(y.jsx)(k,{})}),Object(y.jsx)(i.a,{path:"/updateTeam/:departmentId/:teamId",children:Object(y.jsx)(k,{})}),Object(y.jsx)(i.a,{path:"/updateMembers/:action/:departmentId/:teamId",children:Object(y.jsx)(B,{})})]})})]})})})]})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,182)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(U,{})}),document.getElementById("root")),Y()}},[[157,1,2]]]);
//# sourceMappingURL=main.8debc31c.chunk.js.map